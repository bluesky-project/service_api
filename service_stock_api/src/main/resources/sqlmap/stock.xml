<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.stock">
	<select id="getStockInfo" parameterType="map" resultType="map">
		select *
		from stock_info 
		where prd_title = #{prdTitle}
		<if test="optTitle != null and optTitle !=''">
			and opt_title = #{optTitle}
		</if>
	</select>
	
	<select id="getStockCount" parameterType="map" resultType="long">
		select amount
		from stock_info 
		where prd_title = #{prdTitle}
		and opt_title = #{optTitle}
	</select>
	
	<update id="stockDecrease" parameterType="map">
		update stock_info
		set amount = amount - #{amount}
		where prd_title = #{prdTitle}
		and opt_title = #{optTitle} 
	</update>
	
	<update id="stockIncrease" parameterType="map">
		update stock_info
		set amount = amount + #{amount}
		where prd_title = #{prdTitle}
		and opt_title = #{optTitle} 
	</update>
</mapper>